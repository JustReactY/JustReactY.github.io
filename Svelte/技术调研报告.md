# 技术调研报告


### 1. 需求背景
    自2019年Svelte框架横空出世，短短两年时间就迅速占据开发者满意度、开发者兴趣度榜首，同时市场份额稳步提升，仅次于React、Angular、Vue排至第四位。
    并且作为一个比较年轻的框架，已经拥有和Vue几乎等同数量的贡献者员，对于这个在国外呼声极高的Svelte，进行技术调研及实践。并尝试应用到通天塔项目。



### 2. 一句话结论
    Svelte将自己定位为编译器框架，原理是通过静态编译减少框架运行时的代码量
    Svelte作为编译器框架带来的优势非常明显：编译后代码体积小， 浏览器解析速度快。同时，Svelte 的响应式编程的支持更好，能节省代码量，并提高运行效率。
    在小型项目中， Svelte 值得尝试，它能带来更快的加载速度，更快的性能，和更小的网络传输量。


### 3. 现存方案对比记录

**原理**

Svelte 将自己定于成编译器框架，通过静态编译减少运行时代码。在编译器中将声明式的代码（类似于 Vue）转换成原生 Javascript。同时， Svelte 对响应式编程支持的良好，开发者可以使用更少的代码完成数据到UI的开发工作。

Svelte 开发理念与 Vue 和 React 的组件开发理念相似，但实现方式与 Vue 和 React 有本质的不同。 
Vue 和 React 都使用虚拟 DOM 的方式，在运行时对虚拟 DOM 的变更进行跟踪，并计算最小的 DOM 更新量。
Svelte 是在编译时直接将应用编译成原生 Javascript 对 DOM 操作的接口。相比虚拟 DOM 的方式，Svelte 的方式打包后的代码体积更小执行效率更高。

> 编译型语言在程序执行之前，有一个单独的编译过程，将程序翻译成机器语言，以后执行这个程序的时候，就不用再进行翻译了。
解释型语言，是在运行的时候将程序翻译成机器语言，所以运行速度相对于编译型语言要慢。


**活跃度**

开发者满意度

![img](https://pic2.zhimg.com/80/v2-2af48377c5e1e6ced70fef0dc44e2b15_1440w.jpg)



开发者兴趣度

![img](https://pic1.zhimg.com/80/v2-e59954fc752447dee6e1b06c73db3650_1440w.jpg)



市场占有率

![img](https://pic4.zhimg.com/80/v2-35986caacbf12fd7ae0133b787edcd27_1440w.jpg)



**性能**

Svelte 性能整体表现优于 Vue 和 React。在操作大规模 DOM 节点时，性能表现优于基于虚拟 DOM 的 Vue 和 React。 经过 Svelte 编译过的代码体积小，所以在首屏加载时有明显的优势。

| 类目                     | Svelte   | Vue      | React      |
| ------------------------ | -------- | -------- | ---------- |
| 创建 1000 行表格         | 132.3 ms | 162.3 ms | 165.7 ms   |
| 创建 10000 行表格        | 1,212 ms | 1,252 ms | 1,594.9 ms |
| 在 1000 行表格中交换两行 | 51.8 ms  | 66.6 ms  | 429.6 ms   |
| 首屏加载时间             | 19.5 ms  | 59.6 ms  | 55.6 ms    |


这个[网站](https://www.freecodecamp.org/news/a-realworld-comparison-of-front-end-frameworks-with-benchmarks-2019-update-4be0d3c78075/)统计了现实世界中 Web 应用使用多种 Web 框架构建的相关数据。根据统计，使用一些流行框架的应用经过 gzip 压缩后的大小（KB）分别为：


Angular + ngrx：134

React + Redux：193

Vue：41.8

Svelte：9.7


**构建大型项目**

Svelte 目前尚处在起步阶段，对于大型项目必要的单元测试 并没有完整的方案。目前在大型应用中使用 Svelte , 需要谨慎评估维护性和稳定性风险。


| 类目       | Svelte               | Vue               | React                  |
| ---------- | -------------------- | ----------------- | ---------------------- |
| UI 组件库  | Material design      | Element UI / AntD | AntD / Material design |
| 状态管理   | 自带                   | Vuex              | Redux/MobX             |
| 路由       | Svelte-router        | Vue-router        | React-router           |
| 服务端渲染 | 支持                 | 支持              | 支持                   |
| 测试工具   | 官方网站没有相关内容 | @vue/test-utils   | Jest                   |



**生产环境可用性**

> 经测试svelte项目可以稳定运行在Vue、React项目；通天塔、头尾系统等业务中



**可维护性**

官网提供[平滑的学习曲线](https://svelte.dev/examples#hello-world)



**缺陷及隐患**



**其他**






